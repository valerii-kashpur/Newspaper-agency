{% extends "base.html" %}
{#{% load crispy_forms_filters %}#}
{% block content %}

  <h2>Topics List <a class="btn btn-primary btn-sm"
                     href="{% url "press:topic-create" %}">Create</a></h2>

  {% if topic_list %}

    <form action="" method="get" class="d-flex gap-2">
      <input type="text" name="name"
             value="{{ search_form.initial.name }}"
             class="form-control" placeholder="Enter topic name">

      <button type="submit" class="btn btn-primary">Search</button>

      <a href="{% url 'press:topic-list' %}"
         class="btn btn-secondary">Reset</a>
    </form>



    <table class="table table-striped align-middle">
      <thead>
      <tr>
        <th class="ps-3">ID</th>
        <th>Name</th>
        <th>Articles</th>
        <th>Update</th>
        <th class="text-center">Delete</th>
      </tr>
      </thead>
      <tbody>
      {% for topic in topic_list %}
        <tr>
          <td class="ps-3">{{ topic.id }}</td>
          <td>{{ topic.name }}</td>
          <td>{{ topic.newspaper_count }}</td>
          <td>
            <a class="btn btn-primary btn-sm"
               href="{% url 'press:topic-update' pk=topic.id %}">
              Update
            </a>
          </td>
          <td class="text-center">
            <a class="btn btn-danger btn-sm"
               href="{% url 'press:topic-delete' pk=topic.id %}">
              Delete
            </a>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

  {% else %}
    <p>There are no topics in the service.</p>
  {% endif %}

{% endblock %}